<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="utf-8">
    <title>Don Syme 2.0 : Cow Herding Edition Type Provider</title>
    <meta name="description" content="Though the mystery man Don Syme, Father of F#, is generally heralded for various software based innovations and other computer related things, it transpires he has talents in other unrelated areas...">
    <meta name="author"      content="pezi">
    <meta name="keywords"    content="fsharp, type providers">
    <meta name="viewport"    content="width=device-width, initial-scale=1.0">
    <link rel="icon"      href="/favicon.ico">
    <link rel="canonical" href="http://www.pinksquirrellabs.com/blog\2016\08\23\don-syme-2-0-cow-herding-edition-type-provider/">
    <link rel="next" href="/blog\2015\03\01\introducing-the-mixin-type-provider/">
    <link rel="prev" href="/blog\2017\01\14\programming-in-racket-1/">
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/css/pygments.css">
    <link rel="stylesheet" type="text/css" href="/css/scribble.css">
    <link rel="stylesheet" type="text/css" href="/css/custom.css">
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml"
          href="/feeds\all.atom.xml" title="Atom Feed">
    <link rel="alternate" type="application/rss+xml"
          href="/feeds\all.rss.xml" title="RSS Feed">
    <!-- JS -->

  </head>
  <body>
    <!-- A standard Twitter Bootstrap nav bar -->
    <header class="navbar navbar-default navbar-inverse"
            role="banner">
      <div class="container">
        <div class="navbar-header">
          <button type="button"
                  class="navbar-toggle"
                  data-toggle="collapse"
                  data-target=".our-nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a href="/index.html" class="navbar-brand">Pink Squirrel Labs</a>
        </div>
        <div class="collapse navbar-collapse our-nav-collapse"
             role="navigation">
          <ul class="nav navbar-nav">

            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Tags <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="/index.html">All Posts</a></li>

<li><a href="/tags\6502.html">6502</a></li>

<li><a href="/tags\asi64.html">asi64</a></li>

<li><a href="/tags\books.html">books</a></li>

<li><a href="/tags\C.html">C</a></li>

<li><a href="/tags\C64.html">C64</a></li>

<li><a href="/tags\compilers.html">compilers</a></li>

<li><a href="/tags\cracking.html">cracking</a></li>

<li><a href="/tags\D.html">D</a></li>

<li><a href="/tags\digital-logic.html">digital logic</a></li>

<li><a href="/tags\drey.html">drey</a></li>

<li><a href="/tags\electronics.html">electronics</a></li>

<li><a href="/tags\fairylog.html">fairylog</a></li>

<li><a href="/tags\fpga.html">fpga</a></li>

<li><a href="/tags\fsharp.html">fsharp</a></li>

<li><a href="/tags\game-programming.html">game programming</a></li>

<li><a href="/tags\macros.html">macros</a></li>

<li><a href="/tags\programming-languages.html">programming languages</a></li>

<li><a href="/tags\racket.html">racket</a></li>

<li><a href="/tags\raspberry-pi.html">raspberry pi</a></li>

<li><a href="/tags\reverse-engineering.html">reverse engineering</a></li>

<li><a href="/tags\robotics.html">robotics</a></li>

<li><a href="/tags\roguelike.html">roguelike</a></li>

<li><a href="/tags\scurry.html">scurry</a></li>

<li><a href="/tags\sqlprovider.html">sqlprovider</a></li>

<li><a href="/tags\squirrels.html">squirrels</a></li>

<li><a href="/tags\type-providers.html">type providers</a></li>

<li><a href="/tags\xrm.html">xrm</a></li>
              </ul>
            </li>
            <li>
              <a href="/About.html">About</a>
            </li> 
            <li><a href="/feeds\all.atom.xml">Atom</a></li>
            <li><a href="/feeds\all.rss.xml">RSS</a></li>
          </ul>
        </div>
      </div>
    </header>
    <div class="container">
      <div class="row">

        <!-- Main column -->
        <div id="content" class="col-md-12">





          <article>
  <header>
    <ul class="pager">
    <li class="previous">
      <a href="/blog\2017\01\14\programming-in-racket-1/">&larr; <em>Programming in Racket #1</em></a>
    </li>
    <li class="next">
      <a href="/blog\2015\03\01\introducing-the-mixin-type-provider/"><em>Introducing - The Mixin Type Provider</em> &rarr;</a>
    </li>
    </ul>
    <h1>Don Syme 2.0 : Cow Herding Edition Type Provider</h1>
    <p class='date-and-tags'>
<time datetime="2016-08-23" pubdate="true">2016-08-23</time> :: <span class="tags"><a href="/tags\fsharp.html">fsharp</a>, <a href="/tags\type-providers.html">type providers</a></span></p>
  </header>

<p>Though the mystery man Don Syme, Father of F#, is generally heralded for various software based innovations and other computer related things, it transpires he has talents in other unrelated areas&hellip;</p>
<!-- more-->

<p>Specifically, Don is master cow herder (yes, as in moo-cows). Whilst this might seem unlikely, I present to you a legendary but scarce video, with Don in action whilst attempting to get to work across the treachrous cow infested fields of Cambridge. Behold! (Watch the whole thing for a bonus cow at the end, tired from the workout)</p>

<p>
 <iframe src="https://www.youtube.com/embed/tYycYHIU_jc" width="420" height="315"></iframe></p>

<h1>Type Providers?</h1>

<p>It has been quite some time since I wrote a sensible type provider, well overdue I would say. I decided I would give the Don Syme Type Provider a facelift to celebrate his lesser-known talents of cow herding.</p>

<p><a href="http://www.pinksquirrellabs.com/blog/2014/02/21/the-don-syme-type-provider">The original type provider</a> produces an endless stream of facts about the mystery man himself. This of course remains, but now you can also specify if you are interested only in more technical / geeky facts as is evidenced in this picture.</p>

<p><img src="../../../../../img/old/don2.png" alt="" width="800" height="200" /></p>

<p>(see the last section of this post for instructions on obtaining and running the type provider)</p>

<h1>Cows!</h1>

<p>The primary new feature, however, is a type system game where you can play as Don, attempting to herd the Cambridge Cows back into their cow sheds. Here is a picture of a game in progress:</p>

<p><img src="../../../../../img/old/dcows.png" alt="" width="600" height="200" /></p>

<p>Legend:</p>

<p>"C" -&gt; A Cow</p>

<p>"░" -&gt; empty field</p>

<p>"D" -&gt; Don</p>

<p>"*" -&gt; A cow in a cow shed</p>

<p>"۩" -&gt; A cow shed</p>

<p>"█" -&gt; Wall</p>

<p></p>

<p>The aim is to get the cows into their cow sheds. Don is able to push the cows around, but only if there is an empty space behind them! You will quickly see this is really quite difficult and will require some thought to succeed.</p>

<h1>Sokoban!</h1>

<p>The astute and well gamed reader may have noticed this is a remixed version of the popular game <a href="https://en.wikipedia.org/wiki/Sokoban">Sokoban</a>. It is in fact is a full Sokoban implementation in a type provider, that uses the .slc Sokoban level format. Let's have a look at how it works.</p>

<h2>Model</h2>

<p>We can model the entire game in a couple of unions and records (you can read the source of this file <a href="https://github.com/pezipink/InteractiveProvider/blob/master/CowHerding/Cows.fs">here</a>)</p>

<div class="brush: fsharp">
 <div class="highlight">
  <table class="highlighttable">
   <tbody>
    <tr>
     <td class="linenos">
      <div class="linenodiv">
       <pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td>
     <td class="code">
      <div>
       <pre><span></span><span class="k">type</span><span class="w"> </span><span class="nc">Cambridge</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">Cow</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">Field</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">Don</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="kt">bool</span><span class="w">  </span><span class="c1">// true if on a shed</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">Shed</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="c1">// true if a cow is in the Shed</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">Wall</span>

<span class="w">  </span><span class="k">with</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="nf">ToString</span><span class="bp">()</span><span class="w"> </span><span class="o">=</span>
<span class="w">      </span><span class="k">match</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="k">with</span>
<span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">Cow</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">"C"</span>
<span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">"░"</span>
<span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">Don</span><span class="w"> </span><span class="o">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">"D"</span>
<span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">Shed</span><span class="w"> </span><span class="k">true</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">"*"</span>
<span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">Shed</span><span class="w"> </span><span class="k">false</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">"۩"</span>
<span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">Wall</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">"█"</span><span class="w"> </span>

<span class="k">type</span><span class="w"> </span><span class="nc">Direction</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">North</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">South</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">East</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">West</span>

<span class="k">type</span><span class="w"> </span><span class="nc">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">int</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">int</span>

<span class="k">type</span><span class="w"> </span><span class="nc">LevelData</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="o">{</span><span class="w"> </span><span class="n">Id</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">string</span>
<span class="w">    </span><span class="n">Width</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">int</span>
<span class="w">    </span><span class="n">Height</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">int</span>
<span class="w">    </span><span class="n">Data</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">int</span><span class="o">*</span><span class="n">int</span><span class="o">,</span><span class="w"> </span><span class="n">Cambridge</span><span class="o">&gt;</span><span class="w"> </span><span class="o">}</span>

<span class="k">type</span><span class="w"> </span><span class="nc">LevelCollection</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="o">{</span><span class="w"> </span><span class="n">Title</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">string</span>
<span class="w">    </span><span class="n">Description</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">string</span>
<span class="w">    </span><span class="n">Copyright</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">string</span>
<span class="w">    </span><span class="n">Levels</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">LevelData</span><span class="w"> </span><span class="kt">list</span><span class="w"> </span><span class="o">}</span>
</pre></div></td></tr></tbody></table></div>

</div>

<h2>Level Files</h2>

<p>The .slc files are simply XML files, containing a set of levels. We can use the XML type provider to do the hard work for us (yes, you can use type providers in other type providers). The current directory is scanned for .slc level collection files at compile time, and each one is turned into a Level Collection record.</p>

<div class="brush: fsharp">
 <div class="highlight">
  <table class="highlighttable">
   <tbody>
    <tr>
     <td class="linenos">
      <div class="linenodiv">
       <pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span></pre></div></td>
     <td class="code">
      <div>
       <pre><span></span><span class="k">let</span><span class="w"> </span><span class="nv">readLevels</span><span class="w"> </span><span class="o">(</span><span class="n">root</span><span class="o">:</span><span class="nn">CowLevel</span><span class="p">.</span><span class="n">SokobanLevels</span><span class="o">)</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="c1">// reads an entire .slc sokoban level collection</span>
<span class="w">  </span><span class="c1">// do we care about memory? of course not!</span>
<span class="w">  </span><span class="o">{</span><span class="w"> </span><span class="n">Title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">root</span><span class="o">.</span><span class="n">Title</span>
<span class="w">   </span><span class="n">Description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">root</span><span class="o">.</span><span class="n">Description</span>
<span class="w">   </span><span class="n">Copyright</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">root</span><span class="o">.</span><span class="n">LevelCollection</span><span class="o">.</span><span class="n">Copyright</span>
<span class="w">   </span><span class="n">Levels</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="n">root</span><span class="o">.</span><span class="n">LevelCollection</span><span class="o">.</span><span class="n">Levels</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">Array</span><span class="p">.</span><span class="n">map</span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">level</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">      </span><span class="o">{</span><span class="w"> </span><span class="n">Id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">level</span><span class="o">.</span><span class="n">Id</span>
<span class="w">        </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">level</span><span class="o">.</span><span class="n">Height</span>
<span class="w">        </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">level</span><span class="o">.</span><span class="n">Width</span>
<span class="w">        </span><span class="n">Data</span><span class="w"> </span><span class="o">=</span>
<span class="w">          </span><span class="o">[</span><span class="k">for</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">level</span><span class="o">.</span><span class="n">Ls</span><span class="o">.</span><span class="n">Length</span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="k">do</span>
<span class="w">             </span><span class="k">let</span><span class="w"> </span><span class="nv">chars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">level</span><span class="o">.</span><span class="n">Ls</span><span class="o">.[</span><span class="n">row</span><span class="o">].</span><span class="n">ToCharArray</span><span class="bp">()</span>
<span class="w">             </span><span class="k">for</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">chars</span><span class="o">.</span><span class="n">Length</span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="k">do</span>
<span class="w">               </span><span class="k">let</span><span class="w"> </span><span class="nv">c</span><span class="w"> </span><span class="o">=</span>
<span class="w">                 </span><span class="k">match</span><span class="w"> </span><span class="n">chars</span><span class="o">.[</span><span class="n">col</span><span class="o">]</span><span class="w"> </span><span class="k">with</span>
<span class="w">                 </span><span class="o">|</span><span class="w"> </span><span class="sc">&#39; &#39;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Field</span>
<span class="w">                 </span><span class="o">|</span><span class="w"> </span><span class="sc">&#39;#&#39;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Wall</span>
<span class="w">                 </span><span class="o">|</span><span class="w"> </span><span class="sc">&#39;$&#39;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Cow</span>
<span class="w">                 </span><span class="o">|</span><span class="w"> </span><span class="sc">&#39;.&#39;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Shed</span><span class="w"> </span><span class="k">false</span>
<span class="w">                 </span><span class="o">|</span><span class="w"> </span><span class="sc">&#39;*&#39;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Shed</span><span class="w"> </span><span class="k">true</span>
<span class="w">                 </span><span class="o">|</span><span class="w"> </span><span class="sc">&#39;@&#39;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Don</span><span class="w"> </span><span class="k">false</span>
<span class="w">                 </span><span class="o">|</span><span class="w"> </span><span class="sc">&#39;+&#39;</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Don</span><span class="w"> </span><span class="k">true</span>
<span class="w">                 </span><span class="o">|</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">failwithf</span><span class="w"> </span><span class="s">"unexpected character &#39;%c&#39;"</span><span class="w"> </span><span class="n">c</span>
<span class="w">               </span><span class="k">yield</span><span class="w"> </span><span class="o">(</span><span class="n">row</span><span class="o">,</span><span class="n">col</span><span class="o">),</span><span class="n">c</span><span class="o">]</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">Map</span><span class="p">.</span><span class="n">ofList</span><span class="w"> </span><span class="o">})</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">Seq</span><span class="p">.</span><span class="n">toList</span><span class="w"> </span><span class="o">}</span>
</pre></div></td></tr></tbody></table></div>

</div>

<p>Piece of cake, it basically writes itself!</p>

<h2>Logic</h2>

<p>Now for the most difficult part, which is the encoding of the game rules. The type provider will always allow Don to attempt to move in any direction. We must work out if the movement is valid, and update the game state if it is.</p>

<p>First up, find Don's current location in the map, and whether he is "standing" on a shed or field</p>

<div class="brush: fsharp">
 <div class="highlight">
  <table class="highlighttable">
   <tbody>
    <tr>
     <td class="linenos">
      <div class="linenodiv">
       <pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td>
     <td class="code">
      <div>
       <pre><span></span><span class="k">let</span><span class="w"> </span><span class="nv">moveDon</span><span class="w"> </span><span class="n">direction</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="k">let</span><span class="w"> </span><span class="o">(</span><span class="n">dx</span><span class="o">,</span><span class="n">dy</span><span class="o">),</span><span class="n">don</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nn">Map</span><span class="p">.</span><span class="n">pick</span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">Don</span><span class="w"> </span><span class="o">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Some</span><span class="o">(</span><span class="n">k</span><span class="o">,</span><span class="n">v</span><span class="o">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">None</span><span class="o">)</span><span class="w"> </span><span class="n">map</span>
<span class="w">  </span><span class="c1">// Don can only ever be standing on a open field or shed tile</span>
<span class="w">  </span><span class="k">let</span><span class="w"> </span><span class="nv">oldTile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="n">don</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">Don</span><span class="w"> </span><span class="k">true</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Shed</span><span class="w"> </span><span class="k">false</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Field</span>
</pre></div></td></tr></tbody></table></div>

</div>

<p>Next we will need to work out what tiles will be affected by the move. This will always potentially be the two tiles in the direction Don is attempting to move. We can do a bit of trickery here to calculate the indexes and extract the map tiles, and if the index is out of bounds we ignore it. This will return a list of 1 or 2 tiles we can then match on to see what happens.</p>

<div class="brush: fsharp">
 <div class="highlight">
  <table class="highlighttable">
   <tbody>
    <tr>
     <td class="linenos">
      <div class="linenodiv">
       <pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td>
     <td class="code">
      <div>
       <pre><span></span><span class="k">match</span><span class="w"> </span><span class="n">direction</span><span class="w"> </span><span class="k">with</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">North</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="o">[-</span><span class="mi">1</span><span class="o">,</span><span class="mi">0</span><span class="o">;-</span><span class="mi">2</span><span class="o">,</span><span class="mi">0</span><span class="o">]</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">South</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="mi">0</span><span class="o">;</span><span class="mi">2</span><span class="o">,</span><span class="mi">0</span><span class="o">]</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">East</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="o">[</span><span class="mi">0</span><span class="o">,</span><span class="mi">1</span><span class="o">;</span><span class="mi">0</span><span class="o">,</span><span class="mi">2</span><span class="o">]</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">West</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="o">[</span><span class="mi">0</span><span class="o">,-</span><span class="mi">1</span><span class="o">;</span><span class="mi">0</span><span class="o">,-</span><span class="mi">2</span><span class="o">]</span>
<span class="w">  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">List</span><span class="p">.</span><span class="n">choose</span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">)</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">    </span><span class="nn">Map</span><span class="p">.</span><span class="n">tryPick</span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">(</span><span class="n">dx</span><span class="o">+</span><span class="n">x</span><span class="o">,</span><span class="n">dy</span><span class="o">+</span><span class="n">y</span><span class="o">)</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="n">Some</span><span class="o">(</span><span class="n">k</span><span class="o">,</span><span class="n">v</span><span class="o">)</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">None</span><span class="o">)</span><span class="w"> </span><span class="n">map</span><span class="o">)</span>
<span class="w">  </span><span class="o">|&gt;</span><span class="w"> </span><span class="k">function</span>
</pre></div></td></tr></tbody></table></div>

</div>

<p>We can say that if Don is attempting to move onto a field, that is always valid regardless of the second tile. The same holds true for empty cow sheds</p>

<div class="brush: fsharp">
 <div class="highlight">
  <table class="highlighttable">
   <tbody>
    <tr>
     <td class="linenos">
      <div class="linenodiv">
       <pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td>
     <td class="code">
      <div>
       <pre><span></span><span class="c1">// Don can always move onto a dirt tile</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="o">[(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">),</span><span class="n">Field</span><span class="o">]</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="o">[(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">),</span><span class="n">Field</span><span class="o">;_]</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">    </span><span class="n">map</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">Map</span><span class="p">.</span><span class="n">add</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">Don</span><span class="w"> </span><span class="k">false</span><span class="o">)</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">Map</span><span class="p">.</span><span class="n">add</span><span class="w"> </span><span class="o">(</span><span class="n">dx</span><span class="o">,</span><span class="n">dy</span><span class="o">)</span><span class="w"> </span><span class="n">oldTile</span>
<span class="w">  </span>
<span class="w">  </span><span class="c1">// same as above, for moving onto a field without a cow in it</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="o">[(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">),</span><span class="n">Shed</span><span class="w"> </span><span class="k">false</span><span class="o">]</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="o">[(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">),</span><span class="n">Shed</span><span class="w"> </span><span class="k">false</span><span class="o">;_]</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">    </span><span class="n">map</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">Map</span><span class="p">.</span><span class="n">add</span><span class="w"> </span><span class="o">(</span><span class="n">dx</span><span class="o">,</span><span class="n">dy</span><span class="o">)</span><span class="w"> </span><span class="n">oldTile</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">Map</span><span class="p">.</span><span class="n">add</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">Don</span><span class="w"> </span><span class="k">true</span><span class="o">)</span>
</pre></div></td></tr></tbody></table></div>

</div>

<p>In these cases we simply place Don in the new location, and replace his old location with whatever tile he was "standing" on before.</p>

<p>The slightly more complex cases are of pushing cows around. However, using the pattern matching, the solution to this problem, like a lot of this, basically writes itself.</p>

<div class="brush: fsharp">
 <div class="highlight">
  <table class="highlighttable">
   <tbody>
    <tr>
     <td class="linenos">
      <div class="linenodiv">
       <pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span></pre></div></td>
     <td class="code">
      <div>
       <pre><span></span><span class="w">  </span><span class="c1">// Valid cow cases. We can move a cow forward if there is an empty space behind them.</span>
<span class="w">  </span><span class="c1">// Shed true is also a cow but must then be replaced with a Don true</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="o">[(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">),</span><span class="n">Cow</span><span class="o">;</span><span class="w"> </span><span class="o">(</span><span class="n">x&#39;</span><span class="o">,</span><span class="n">y&#39;</span><span class="o">),</span><span class="n">Field</span><span class="o">]</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">    </span><span class="n">map</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">Map</span><span class="p">.</span><span class="n">add</span><span class="w"> </span><span class="o">(</span><span class="n">dx</span><span class="o">,</span><span class="n">dy</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">oldTile</span><span class="o">)</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">Map</span><span class="p">.</span><span class="n">add</span><span class="w"> </span><span class="o">(</span><span class="n">x&#39;</span><span class="o">,</span><span class="n">y&#39;</span><span class="o">)</span><span class="w"> </span><span class="n">Cow</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">Map</span><span class="p">.</span><span class="n">add</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">Don</span><span class="w"> </span><span class="k">false</span><span class="o">)</span>
<span class="w">   </span>
<span class="w">  </span><span class="c1">// Moving a cow from a shed onto a field</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="o">[(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">),</span><span class="n">Shed</span><span class="w"> </span><span class="k">true</span><span class="o">;</span><span class="w"> </span><span class="o">(</span><span class="n">x&#39;</span><span class="o">,</span><span class="n">y&#39;</span><span class="o">),</span><span class="n">Field</span><span class="o">]</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">    </span><span class="n">map</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">Map</span><span class="p">.</span><span class="n">add</span><span class="w"> </span><span class="o">(</span><span class="n">dx</span><span class="o">,</span><span class="n">dy</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">oldTile</span><span class="o">)</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">Map</span><span class="p">.</span><span class="n">add</span><span class="w"> </span><span class="o">(</span><span class="n">x&#39;</span><span class="o">,</span><span class="n">y&#39;</span><span class="o">)</span><span class="w"> </span><span class="n">Cow</span>
<span class="w">    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">Map</span><span class="p">.</span><span class="n">add</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">Don</span><span class="w"> </span><span class="k">true</span><span class="o">)</span>
<span class="w">   </span>
<span class="w">  </span><span class="c1">// moving a cow from a shed or field to a shed</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="o">[(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">),</span><span class="n">Shed</span><span class="w"> </span><span class="k">true</span><span class="o">;</span><span class="w"> </span><span class="o">(</span><span class="n">x&#39;</span><span class="o">,</span><span class="n">y&#39;</span><span class="o">),</span><span class="n">Shed</span><span class="w"> </span><span class="k">false</span><span class="o">]</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">        </span><span class="n">map</span>
<span class="w">        </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">Map</span><span class="p">.</span><span class="n">add</span><span class="w"> </span><span class="o">(</span><span class="n">dx</span><span class="o">,</span><span class="n">dy</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">oldTile</span><span class="o">)</span>
<span class="w">        </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">Map</span><span class="p">.</span><span class="n">add</span><span class="w"> </span><span class="o">(</span><span class="n">x&#39;</span><span class="o">,</span><span class="n">y&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">Shed</span><span class="w"> </span><span class="k">true</span><span class="o">)</span>
<span class="w">        </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">Map</span><span class="p">.</span><span class="n">add</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">Don</span><span class="w"> </span><span class="k">true</span><span class="o">)</span>
<span class="w">        </span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="o">[(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">),</span><span class="n">Cow</span><span class="o">;</span><span class="w"> </span><span class="o">(</span><span class="n">x&#39;</span><span class="o">,</span><span class="n">y&#39;</span><span class="o">),</span><span class="n">Shed</span><span class="w"> </span><span class="k">false</span><span class="o">]</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span>
<span class="w">        </span><span class="n">map</span>
<span class="w">        </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">Map</span><span class="p">.</span><span class="n">add</span><span class="w"> </span><span class="o">(</span><span class="n">dx</span><span class="o">,</span><span class="n">dy</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">oldTile</span><span class="o">)</span>
<span class="w">        </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">Map</span><span class="p">.</span><span class="n">add</span><span class="w"> </span><span class="o">(</span><span class="n">x&#39;</span><span class="o">,</span><span class="n">y&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">Shed</span><span class="w"> </span><span class="k">true</span><span class="o">)</span>
<span class="w">        </span><span class="o">|&gt;</span><span class="w"> </span><span class="nn">Map</span><span class="p">.</span><span class="n">add</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">Don</span><span class="w"> </span><span class="k">false</span><span class="o">)</span>
<span class="w">    </span>
<span class="w">  </span><span class="c1">// all other cases are invalid.</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="o">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">map</span>
</pre></div></td></tr></tbody></table></div>

</div>

<p>And that is the entire game done, except a couple of auxillary functions to determine if the game has been won, to print the level and so forth.</p>

<h1>Providing Bovine Based Types</h1>

<p>Like all my type provider games, this is implemented using my <a href="http://pinksquirrellabs.com/post/2014/05/01/BASIC%E2%80%99s-50th-Anniversary-%E2%80%A6-and-more-crazy-F-type-providers!.aspx">Interactive Provider</a> which allows easy creation of type providers without having to write any horrible provided types code. I have this simple union that determines the menu structure of the type provider</p>

<div class="brush: fsharp">
 <div class="highlight">
  <table class="highlighttable">
   <tbody>
    <tr>
     <td class="linenos">
      <div class="linenodiv">
       <pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td>
     <td class="code">
      <div>
       <pre><span></span><span class="k">type</span><span class="w"> </span><span class="nc">MenuTypes</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">Introduction</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">FactSelect</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">Facts</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="kt">bool</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">CollectionSelect</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">LevelSelect</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">LevelCollection</span>
<span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">Game</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">LevelData</span>
</pre></div></td></tr></tbody></table></div>

</div>

<p>then each one has a InteractiveState object associated with it, that determines the text that appears in Intellisense, the options displayed as properties, and a callback to handle the results. These call each other to navigate through the menus and recursively to display the endless amazing facts or the currently playing level of cow herding. I will show the fact states here, but you can look at the full implementation if you want to see how the cow herding works.</p>

<div class="brush: fsharp">
 <div class="highlight">
  <table class="highlighttable">
   <tbody>
    <tr>
     <td class="linenos">
      <div class="linenodiv">
       <pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td>
     <td class="code">
      <div>
       <pre><span></span><span class="k">let</span><span class="w"> </span><span class="nv">rec</span><span class="w"> </span><span class="n">factCycle</span><span class="w"> </span><span class="n">factType</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="o">{</span><span class="w"> </span><span class="n">displayOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="o">_</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">      </span><span class="o">[</span><span class="s">"Learn another amazing fact"</span><span class="o">,</span><span class="n">box</span><span class="w"> </span><span class="mi">1</span><span class="o">]</span>
<span class="w">    </span><span class="n">displayText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="o">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">getFact</span><span class="w"> </span><span class="n">factType</span>
<span class="w">    </span><span class="n">processResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="o">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">factCycle</span><span class="w"> </span><span class="n">factType</span><span class="w"> </span><span class="o">:&gt;</span><span class="w"> </span><span class="o">_</span>
<span class="w">    </span><span class="n">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Facts</span><span class="w"> </span><span class="n">factType</span><span class="w"> </span><span class="o">}</span>
<span class="w"> </span>
<span class="k">let</span><span class="w"> </span><span class="nv">factTypeSelect</span><span class="bp">()</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="o">{</span><span class="w"> </span><span class="n">displayOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="o">_</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">      </span><span class="o">[</span><span class="s">"All"</span><span class="o">,</span><span class="w"> </span><span class="n">box</span><span class="w"> </span><span class="k">false</span>
<span class="w">       </span><span class="s">"Technical"</span><span class="o">,</span><span class="n">box</span><span class="w"> </span><span class="k">true</span><span class="o">]</span>
<span class="w">    </span><span class="n">displayText</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="o">_</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">      </span><span class="s">"Select a fact category"</span>
<span class="w">    </span><span class="n">processResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="o">(</span><span class="n">e</span><span class="o">,</span><span class="n">resp</span><span class="o">)</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">      </span><span class="n">factCycle</span><span class="w"> </span><span class="o">(</span><span class="n">resp</span><span class="w"> </span><span class="o">:?&gt;</span><span class="w"> </span><span class="kt">bool</span><span class="o">)</span><span class="w"> </span><span class="o">:&gt;</span><span class="w"> </span><span class="o">_</span>
<span class="w">    </span><span class="n">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FactSelect</span><span class="w"> </span><span class="o">}</span>
</pre></div></td></tr></tbody></table></div>

</div>

<p>(the fact generator works by calling a webservice and parsing the results using the JSON type provider)</p>

<h1>To Get Herding</h1>

<p>(NOTE. You MUST change your tooltip font to a monospace font. I suggest Lucida Console in at least 16pt.)</p>

<p><a href="https://github.com/pezipink/InteractiveProvider">Grab the InteractiveProvider from my github here</a>, build it, then create a script file and reference the type provider. Since the InteractiveProvider dynamically loads assemblies that contain types implementing the interfaces it is looking for, you will have to tell it as a static parameter the directory that the cow herding dll resides in.</p>

<div class="brush: fsharp">
 <div class="highlight">
  <table class="highlighttable">
   <tbody>
    <tr>
     <td class="linenos">
      <div class="linenodiv">
       <pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td>
     <td class="code">
      <div>
       <pre><span></span><span class="o">#</span><span class="n">r</span><span class="w"> </span><span class="s">@"c:\repos\InteractiveProvider\InteractiveProvider\bin\Debug\InteractiveProvider.dll"</span>
<span class="k">open</span><span class="w"> </span><span class="nn">PinkSquirrels.Interactive</span>
<span class="k">type</span><span class="w"> </span><span class="nc">GamesType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InteractiveProvider</span><span class="o">&lt;</span><span class="w"> </span><span class="s">@"c:\repos\InteractiveProvider\Cowherding\bin\Debug\"</span><span class="o">&gt;</span>
<span class="n">games</span><span class="o">.</span><span class="n">``Start DonSyme``</span>
</pre></div></td></tr></tbody></table></div>

</div>

<p>Credit where credit's due, I have included 3 .slc files of Sokoban levels from the <a href="http://www.sourcecode.se/sokoban/levels">website found here</a>. If you are really bored at work, there are some forty thousand levels of cow herding action for you to download!</p>

<p>Note this is designed to work in Visual Studio. Emacs will probably mess up the popups depending on your settings, and I have no idea what it will do in VSCode.</p>

<p></p>

<h1>MOOOOO! HAPPY HERDING!</h1>

<p></p>
  <footer>
    <ul class="pager">
    <li class="previous">
      <a href="/blog\2017\01\14\programming-in-racket-1/">&larr; <em>Programming in Racket #1</em></a>
    </li>
    <li class="next">
      <a href="/blog\2015\03\01\introducing-the-mixin-type-provider/"><em>Introducing - The Mixin Type Provider</em> &rarr;</a>
    </li>
    </ul>
    <script type="text/javascript">
      !function(d,s,id){
          var js,fjs=d.getElementsByTagName(s)[0];
          if(!d.getElementById(id)){
              js=d.createElement(s);
              js.id=id;
              js.src="//platform.twitter.com/widgets.js";
              fjs.parentNode.insertBefore(js,fjs);
          }
      }(document,"script","twitter-wjs");
    </script>
    <a href="https://twitter.com/share"
       class="twitter-share-button"
       data-url="http://www.pinksquirrellabs.com/blog\2016\08\23\don-syme-2-0-cow-herding-edition-type-provider/"
       data-dnt="true">
      "Tweet"</a>

  </footer>
</article>
        </div>
      </div>
      <footer>
        <hr />
        <p><a href="https://twitter.com/pezi_pink"
              class="twitter-follow-button"
              data-show-count="false"
              data-lang="en">
             "Follow pezi_pink"
           </a>
           <script type="text/javascript">
             !function(d,s,id){
                 var js,fjs=d.getElementsByTagName(s)[0];
                 if(!d.getElementById(id)){
                     js=d.createElement(s);
                     js.id=id;
                     js.src="//platform.twitter.com/widgets.js";
                     fjs.parentNode.insertBefore(js,fjs);
                 }
             }(document,"script","twitter-wjs");
           </script></p>
      </footer>
    </div>
    <!-- </body> JS -->
    <script type="text/javascript" src="//code.jquery.com/jquery.min.js"></script>
    <script type="text/javascript" src="/js/bootstrap.min.js"></script>
  </body>
</html>